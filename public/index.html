<!DOCTYPE>
<html>

<head></head>
<meta charset="UTF-8">
<title>SOCKET.IO CLIENT</title>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
<script src="/socket.io/socket.io.js"></script>
<style type="text/css">
    #messages{
        width: 400px;
        height: 600px;
        border: solid;
        border-color: black;
        margin: 0 auto;
    }
    #form {
        width: 400px;
        height: auto;
        border: solid;
        border-color: red;
        margin: 0 auto;
    }
    #message{
        width: 350px;
    }
</style>
<body>
    <input id="name">
    <div id="messages"></div>
    <div id="form">
        <input id="message"  type="text"><button id="sendButton">送出</button>
    </div>
</body>
<script>
    var socket = io();
    var messages = $('#messages');
    var messageField = $('#message');
    var sendButton = $('#sendButton');
    
    sendButton.click( function(){
        var name = $('#name').val() || '路人';
        var message = messageField.val();
       
        if(message && message !==''){
            socket.emit('sendMessage',{
                name: name,
                content: message
            });
        }
       messageField.val('');
         console.log(name+":"+message);
    });

    socket.on('message',function(data){
        console.log('123');
        console.log(data.name+":"+data.content);
        var messageDiv = $('<div/>');
        messageDiv.text(data.name+':'+data.content);
        messages.append(messageDiv);
    });

    
</script>
<footer></footer>
</html>